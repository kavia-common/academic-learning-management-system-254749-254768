{"is_source_file": true, "format": "JavaScript", "description": "This file provides API services related to authentication, backend health checks, user role management, grading submissions, and uploading files in a React-based frontend application. It includes functions that interface with a backend API, manage environment configuration, and handle session tokens.", "external_files": ["../supabaseClient"], "external_methods": ["getSupabaseClient"], "published": ["getSessionToken", "backendHealthcheck", "updateUserRole", "gradeSubmission", "createSignedUploadUrl"], "classes": [], "methods": [{"name": "getSessionToken()", "description": "Retrieves the current session's access token from Supabase to authenticate requests.", "scope": "", "scopeKind": ""}, {"name": "backendHealthcheck()", "description": "Performs a health check on the backend API, returning status information.", "scope": "", "scopeKind": ""}, {"name": "updateUserRole({ userId, role })", "description": "Calls the backend to update a user's role, typically used by admins.", "scope": "", "scopeKind": ""}, {"name": "gradeSubmission({ submissionId, score, feedback })", "description": "Posts a grade and feedback for a submission, used by instructors or admins.", "scope": "", "scopeKind": ""}, {"name": "createSignedUploadUrl({ fileName, contentType, scope })", "description": "Requests a signed URL from the backend to upload files securely.", "scope": "", "scopeKind": ""}, {"name": "backendJson(path, { method = \"GET\", body, extraHeaders } = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "buildAuthHeaders(extra = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getFeatureFlags()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "shouldUseBackend()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getSupabaseClient", "supabase.auth.getSession", "fetch", "buildAuthHeaders", "backendJson", "getSessionToken"], "search-terms": ["api", "auth", "backend health", "user role", "grading", "file upload", "signed URL", "React environment", "Supabase"], "state": 2, "file_id": 24, "knowledge_revision": 65, "git_revision": "ac1f573b31e7668f5a8fb3a204601f756b89a67f", "revision_history": [{"52": ""}, {"65": "ac1f573b31e7668f5a8fb3a204601f756b89a67f"}], "ctags": [{"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^  const headers = { \"Content-Type\": \"application\\/json\", ...extra };$/", "language": "JavaScript", "kind": "property", "scope": "buildAuthHeaders.headers", "scopeKind": "class"}, {"_type": "tag", "name": "backendHealthcheck", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function backendHealthcheck() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "backendJson", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^async function backendJson(path, { method = \"GET\", body, extraHeaders } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, { method = \"GET\", body, extraHeaders } = {})"}, {"_type": "tag", "name": "buildAuthHeaders", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^async function buildAuthHeaders(extra = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(extra = {})"}, {"_type": "tag", "name": "createSignedUploadUrl", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function createSignedUploadUrl({ fileName, contentType, scope }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ fileName, contentType, scope })"}, {"_type": "tag", "name": "getFeatureFlags", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^function getFeatureFlags() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getSessionToken", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function getSessionToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "gradeSubmission", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function gradeSubmission({ submissionId, score, feedback }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ submissionId, score, feedback })"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^  const headers = { \"Content-Type\": \"application\\/json\", ...extra };$/", "language": "JavaScript", "kind": "class", "scope": "buildAuthHeaders", "scopeKind": "class"}, {"_type": "tag", "name": "shouldUseBackend", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^function shouldUseBackend() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "updateUserRole", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function updateUserRole({ userId, role }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ userId, role })"}], "hash": "d5ad9e750b7e44a86b3af3782d513e77", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/services/api.js", "fields": [{"name": "const headers = { \"Content-Type\": \"application\\/json\", ...extra };", "scope": "buildAuthHeaders.headers", "scopeKind": "class", "description": "unavailable"}]}