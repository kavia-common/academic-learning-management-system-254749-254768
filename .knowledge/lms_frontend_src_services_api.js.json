{"is_source_file": true, "format": "JavaScript", "description": "This file contains JavaScript code for frontend API interactions in an educational learning management system. It provides functions for session management, feature flag evaluation, backend health checks, user role management, grading, and upload URL generation, primarily interacting with backend services via fetch calls.", "external_files": ["../supabaseClient"], "external_methods": ["getSupabaseClient"], "published": ["getSessionToken", "backendHealthcheck", "updateUserRole", "gradeSubmission", "createSignedUploadUrl"], "classes": [], "methods": [{"name": "getSessionToken()", "description": "Returns the current Supabase session access token for authenticated requests.", "scope": "", "scopeKind": ""}, {"name": "backendHealthcheck()", "description": "Performs a health check to the backend service.", "scope": "", "scopeKind": ""}, {"name": "updateUserRole({ userId, role })", "description": "Updates a user's role via backend API call. Admin-only operation.", "scope": "", "scopeKind": ""}, {"name": "gradeSubmission({ submissionId, score, feedback })", "description": "Posts a grade for a submission, used by instructor or admin.", "scope": "", "scopeKind": ""}, {"name": "createSignedUploadUrl({ fileName, contentType, scope })", "description": "Requests a signed URL for uploading files to the backend storage.", "scope": "", "scopeKind": ""}, {"name": "backendJson(path, { method = \"GET\", body, extraHeaders } = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "buildAuthHeaders(extra = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getFeatureFlags()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "shouldUseBackend()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getSupabaseClient", "fetch", "buildAuthHeaders", "backendJson"], "search-terms": ["api.js", "Supabase session token", "feature flags", "backend healthcheck", "update user role", "grade submission", "signed upload URL"], "state": 2, "file_id": 24, "knowledge_revision": 52, "git_revision": "", "ctags": [{"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^  const headers = { \"Content-Type\": \"application\\/json\", ...extra };$/", "language": "JavaScript", "kind": "property", "scope": "buildAuthHeaders.headers", "scopeKind": "class"}, {"_type": "tag", "name": "backendHealthcheck", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function backendHealthcheck() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "backendJson", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^async function backendJson(path, { method = \"GET\", body, extraHeaders } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, { method = \"GET\", body, extraHeaders } = {})"}, {"_type": "tag", "name": "buildAuthHeaders", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^async function buildAuthHeaders(extra = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(extra = {})"}, {"_type": "tag", "name": "createSignedUploadUrl", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function createSignedUploadUrl({ fileName, contentType, scope }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ fileName, contentType, scope })"}, {"_type": "tag", "name": "getFeatureFlags", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^function getFeatureFlags() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getSessionToken", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function getSessionToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "gradeSubmission", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function gradeSubmission({ submissionId, score, feedback }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ submissionId, score, feedback })"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^  const headers = { \"Content-Type\": \"application\\/json\", ...extra };$/", "language": "JavaScript", "kind": "class", "scope": "buildAuthHeaders", "scopeKind": "class"}, {"_type": "tag", "name": "shouldUseBackend", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^function shouldUseBackend() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "updateUserRole", "path": "/home/kavia/workspace/code-generation/academic-learning-management-system-254749-254768/lms_frontend/src/services/api.js", "pattern": "/^export async function updateUserRole({ userId, role }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ userId, role })"}], "hash": "d0996257b3fdacc99bcdbc1e7f40efcd", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/services/api.js", "fields": [{"name": "const headers = { \"Content-Type\": \"application\\/json\", ...extra };", "scope": "buildAuthHeaders.headers", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"52": ""}]}